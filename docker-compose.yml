version: "3.7"
services:

    backend-app:
        container_name: webapp
        build:
            context: '.'
        depends_on:
            - db
            - redis
        ports:
            - 80:8000
            - 8080:8080

    db:
        image: postgres:11
        container_name: db
        ports:
            - "5432:5432"
        volumes:
            - data-postgres:/var/lib/postgresql/data

    redis:
        image: redis
        container_name: redis
        ports:
            - "6379:6379"
        volumes:
            - data-redis:/data
volumes:
    data-postgres:
    data-redis: